<!-- Faculty/templates/faculty/forgot_password.html -->
<!doctype html>
<html>
<head><meta charset="utf-8"><title>Forgot Password â€” Faculty</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/faculty.css') }}"></head>
<body>
  <div class="login-container">
    <h2>Forgot Password</h2>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="messages">
          {% for cat, msg in messages %}
            <div class="alert {{cat}}">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% if step == "request" %}
      <form method="post" action="{{ url_for('faculty_bp.forgot_password') }}">
        <input type="hidden" name="step" value="request">
        <label>Registration Number</label>
        <input name="registration_number" required>
        <label>Registered Email</label>
        <input name="email" type="email" required>
        <button type="submit">Send Reset OTP</button>
      </form>
    {% elif step == "verify" %}
      <form method="post" action="{{ url_for('faculty_bp.forgot_password') }}">
        <input type="hidden" name="step" value="verify">
        <label>Registration Number</label>
        <input name="registration_number" value="{{ reg_no }}" readonly>
        <label>OTP</label>
        <input name="otp" required>
        <label>New Password</label>
        <input name="new_password" type="password" required>
        <label>Confirm Password</label>
        <input name="confirm_password" type="password" required>
        <button type="submit">Change Password</button>
      </form>
    {% endif %}
    <p><a href="{{ url_for('faculty_bp.login') }}">Back to login</a></p>
  </div>
</body>
</html>
