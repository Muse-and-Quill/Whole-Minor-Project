<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>UAP — Faculty Dashboard</title>

  <!-- GOOGLE FONTS -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    *{ margin:0; padding:0; box-sizing:border-box; font-family:"Poppins",sans-serif; }
    body{ background:#F8F4EC; overflow-x:hidden; color:#333; }

    /* ================= BACKGROUND ================= */
    .bg-image{
      position: fixed;
      inset: 0;
      background-image: url("https://images.unsplash.com/photo-1730451306804-f7d3b0a3c4d5?q=80&w=880&auto=format&fit=crop");
      /* SHRINKED BG */
      background-size: 100%;
      background-repeat: no-repeat;
      background-position: center;
      filter: blur(2px);
      opacity: 0.8;
      z-index: -2;
    }
    .bg-overlay{
      position: fixed;
      inset: 0;
      background: linear-gradient(to bottom right, rgba(248,244,236,0.7), rgba(255,162,57,0.3));
      z-index: -1;
    }
        /* ================= PRELOADER ================= */
        #preloader {
            position: fixed;
            inset: 0;
            background: linear-gradient(to bottom right, #FCF5EE, #EBD5AB);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        #preloader img {
            width: 120px;
            height: 120px;
            animation: pulse 1.5s infinite ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
    /* ================= TOPBAR ================= */
    .topbar{
      width:100%;
      padding:18px 28px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      background: rgba(255,255,255,0.24);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,0.35);
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
      position:sticky;
      top:0;
      z-index:900;
    }
    .topbar h1{ font-size:20px; color:#5A0A6A; font-weight:700; }
    .nav{ display:flex; gap:16px; align-items:center; }
    .nav span{ font-weight:600; color:#333; }
    .nav a{
      padding:8px 18px;
      border-radius:999px;
      background:#FFA239;
      color:#fff;
      text-decoration:none;
      font-weight:600;
      box-shadow:0 6px 14px rgba(0,0,0,0.12);
      transition:0.18s;
    }
    .nav a:hover{ transform:translateY(-2px); background:#ff9933; }

    /* ================= LAYOUT ================= */
    .container{
      width:100%;
      max-width:1180px;
      margin:32px auto;
      padding:18px;
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap:24px;
    }

    /* ================= CARD ================= */
    .card{
      background: rgba(255,255,255,0.30);
      border-radius:20px;
      padding:20px 20px;
      border:1px solid rgba(255,255,255,0.45);
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      transform: translateY(10px);
      animation: enter 0.6s ease-out forwards;
      opacity:0;
    }
    @keyframes enter { to { transform: translateY(0); opacity:1; } }

    .card h2{ color:#5A0A6A; font-size:18px; margin-bottom:10px; font-weight:700; }
    .card p{ font-size:14px; color:#444; margin:6px 0; line-height:1.5; }
    .card strong{ color:#333; }

    /* Controls form */
    .controls form{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .controls button{
      padding:10px 14px;
      border-radius:999px;
      border:none;
      font-weight:600;
      cursor:pointer;
      background:#63A361;
      color:#fff;
      box-shadow:0 6px 14px rgba(0,0,0,0.08);
      transition:0.18s;
    }
    .controls button[value="close"]{ background:#e74c3c; }
    .controls button:hover{ transform:translateY(-2px); }

    /* Upcoming assignments list */
    .card ul{ list-style:none; padding-left:0; margin-top:10px; }
    .card li{
      background: rgba(255,255,255,0.85);
      border-radius:10px;
      padding:10px;
      margin-bottom:10px;
      border:1px solid rgba(0,0,0,0.04);
      font-size:14px;
    }

    /* Quick links */
    .quick a{
      color:#5A0A6A;
      text-decoration:none;
      font-weight:600;
      margin-right:10px;
    }
    .quick a:hover{ color:#3b0651; text-decoration:underline; }

    /* Responsive tweaks */
    @media (max-width:600px){
      .topbar h1{ font-size:18px; }
      .nav a{ padding:7px 12px; font-size:14px; }
      .card{ padding:16px; border-radius:16px; }
    }
  </style>
</head>
<body>
<!-- PRELOADER -->
<div id="preloader">
    <img src="{{ url_for('static', filename='images/preloader.gif') }}" alt="Loading...">
</div>

  <div class="bg-image"></div>
  <div class="bg-overlay"></div>

  <header class="topbar">
    <h1>UAP — Faculty Dashboard</h1>
    <div class="nav">
      <span>Hi, {{ teacher.name }}</span>
      <a href="{{ url_for('faculty_bp.logout') }}">Logout</a>
    </div>
  </header>

  <main class="container">
    <!-- Profile -->
    <section class="card profile">
      <h2>Profile</h2>
      <p><strong>Registration:</strong> {{ teacher.registration_number }}</p>
      <p><strong>Department:</strong> {{ teacher.department }}</p>
      <p><strong>Designation:</strong> {{ teacher.designation or 'N/A' }}</p>
    </section>

    <!-- Controls -->
    <section class="card controls">
      <h2>Controls</h2>
      <form method="post" action="{{ url_for('faculty_bp.toggle_registration') }}">
        <button name="action" value="open" type="submit">Open Semester Registration</button>
        <button name="action" value="close" type="submit">Close Semester Registration</button>
      </form>
      <p style="margin-top:12px; font-size:14px;">Registrations: <strong>{{ total_regs }}</strong> &nbsp; Batches: <strong>{{ total_batches }}</strong></p>
    </section>

    <!-- Upcoming Assignments -->
    <section class="card">
      <h2>Upcoming Assignments</h2>
      <ul>
        {% for a in upcoming_assignments %}
          <li>{{ a.assignment_title }} — {{ a.subject_name }} — due {{ a.due_date or 'N/A' }}</li>
        {% else %}
          <li>No upcoming assignments.</li>
        {% endfor %}
      </ul>
    </section>

    <!-- Quick Links -->
    <section class="card quick">
      <h2>Quick Links</h2>
      <p style="margin-top:8px; font-size:15px;">
        <a href="{{ url_for('faculty_bp.registrations') }}">View Registrations</a> |
        <a href="{{ url_for('faculty_bp.batches') }}">Manage Batches</a> |
        <a href="{{ url_for('faculty_bp.mark_attendance') }}">Mark Attendance</a> |
        <a href="{{ url_for('faculty_bp.assignments') }}">Assignments</a>
      </p>
    </section>
  </main>

  <script src="{{ url_for('static', filename='js/faculty.js') }}"></script>
  <script>

          // Preloader
    window.addEventListener("load", () => {
        setTimeout(() => {
            document.getElementById("preloader").style.display = "none";
        }, 2000);
    });
</script>
  </script>
</body>
</html>
